<form class="{{cssClass}} baseAbfalter itemWindow" autocomplete="off">

    {{!-- Item Sheet Header --}}
    <header class="sheet-header flexrow">
        <img class="item-img" src="{{item.img}}" data-edit="img" data-tooltip="{{item.name}}" />

        <div class="header-details flexrow">
            <h1 class="itemName">
                <input name="name" type="text" value="{{item.name}}" placeholder="{{ localize 'abfalter.nameItem'}}" />
            </h1>

            <div class="item-subtitle">
                <h4 class="item-type">{{localize "abfalter.bodyArmor"}}</h4>
                <span class="item-subType">
                    {{localize "abfalter.equipped"}}?
                    <a class="toggleBoolean" data-label="system.equipped" data-ability="{{system.equipped}}"><i class="{{#if system.equipped}}fa-solid fa-toggle-on{{else}}fa-solid fa-toggle-off{{/if}}"></i></a>
                </span>
            </div>

            <ul class="summary flexrow">
                <li>{{localize "abfalter.quality"}}: {{system.quality}}</li>
                <li>{{localize "abfalter.presence"}}: {{system.derived.presence}}</li>
                <li>{{localize "abfalter.fortitude"}}: {{system.derived.fortitude}}</li>
            </ul>
        </div>
    </header>

    {{!-- Item Sheet Navigation --}}
    <nav class="sheet-navigation tabs itemTabs" data-group="primary">
        <a class="item active" data-tab="description">{{ localize "abfalter.description" }}</a>
        <a class="item" data-tab="details">{{ localize "abfalter.details" }}</a>
        <a class="item" data-tab="effects">{{ localize "abfalter.effects" }}</a>
    </nav>

    {{!-- Item Sheet Body --}}
    <section class="sheet-body">

        {{!-- Description Tab --}}
        <div class="tab description flexcol" data-group="primary" data-tab="description">
            <h6> {{localize "abfalter.description"}} </h6>
            <div style="display: grid;">
                <textarea class="textarea-auto-resize" name="system.description" style="grid-area: 1 / 1 / 2/ 2;">{{system.description}}</textarea>
                <div class="textarea-auto-resize-sibling" aria-hidden="true" style="visibility: hidden; grid-area: 1 / 1 / 2 / 2;">{{system.description}}</div>
            </div>
        </div>

        {{!-- Details Tab --}}
    <div class="tab details" data-group="primary" data-tab="details">
        <h6> {{localize "abfalter.bodyArmor"}} {{ localize "abfalter.details" }} </h6>
        <span>The Armor Type and Layer Type are currently just placeholders/preparing for the next update 1.4.8 when the armorHelmet item will be removed and all armors will be done through here.</span>
        <div class="csSelect weaponContent"> 
            <label>
                <span> {{localize "abfalter.armorType"}} </span>
                <select name="system.armorType">
                    {{selectOptions armorTypeList selected=system.armorType localize=true}}
                </select>
            </label>
        </div>

        <div class="csSelect armorContent"> 
            <label>
                <span> {{localize "abfalter.layerType"}} </span>
                <select name="system.layerType">
                    {{selectOptions layerTypeList selected=system.layerType localize=true}}
                </select>
            </label>
        </div>

        <label> <span> {{localize "abfalter.quality"}} </span> <input type="number" name="system.quality" value="{{system.quality}}" /> </label>
        <div class="armorContent">
            <label>
                <span> {{localize "abfalter.presence"}} </span>
                <input type="number" name="system.presence" value="{{system.presence}}" />
                <span> | </span>
                <span> {{system.derived.presence}} </span>
            </label>
        </div>
        <div class="armorContent">
            <label>
                <span> {{localize "abfalter.fortitude"}} </span>
                <input type="number" name="system.fortitude" value="{{system.fortitude}}" />
                <span> | </span>
                <span> {{system.derived.fortitude}} </span>
            </label>
        </div>
        <div class="armorContent">
            <label>
                <span> {{localize "abfalter.requir"}} </span>
                <input type="number" name="system.requirement" value="{{system.requirement}}" />
                <span> | </span>
                <span> {{system.derived.requirement}} </span>
            </label>
        </div>
        <div class="armorContent">
            <label>
                <span> {{localize "abfalter.natPen"}} </span>
                <input type="number" name="system.natPenalty" value="{{system.natPenalty}}" />
                <span> | </span>
                <span> {{system.derived.natPenalty}} </span>
            </label>
        </div>
        <div class="armorContent">
            <label>
                <span> {{localize "abfalter.movePen"}} </span>
                <input type="number" name="system.movePenalty" value="{{system.movePenalty}}" />
                <span> | </span>
                <span> {{system.derived.movePenalty}} </span>
            </label>
        </div>

        <div class="armorContent">
            <label>
                {{#if system.ignorePenalty}}
                <span> {{localize "abfalter.ignorePenalty"}} </span>
                {{else}}
                <span> {{localize "abfalter.followArmorPenalty"}} </span>
                {{/if}} 
                <button type="button" class="toggleBoolean {{#if system.ignorePenalty}}kiBought{{/if}}"
                    data-label="system.ignorePenalty" data-ability="{{system.ignorePenalty}}">
                    {{#if system.ignorePenalty}}
                    <span> {{localize "abfalter.altered"}} </span>
                    {{else}}
                    <span> {{localize "abfalter.normal"}} </span>
                    {{/if}} 
                </button>
            </label>
        </div>

        <div class="armorContent">
            <label>
                {{#if system.ignoreLayerRules}}
                <span> {{localize "abfalter.ignoreLayerRules"}} </span>
                {{else}}
                <span> {{localize "abfalter.followLayerRules"}} </span>
                {{/if}} 
                <button type="button" class="toggleBoolean {{#if system.ignoreLayerRules}}kiBought{{/if}}"
                    data-label="system.ignoreLayerRules" data-ability="{{system.ignoreLayerRules}}">
                    {{#if system.ignoreLayerRules}}
                    <span> {{localize "abfalter.altered"}} </span>
                    {{else}}
                    <span> {{localize "abfalter.normal"}} </span>
                    {{/if}} 
                </button>
            </label>
        </div>

        <h6> {{localize "abfalter.armorValues"}} {{ localize "abfalter.details" }} </h6>
        <div class="armorCard">
            <div>
                <span> {{localize "abfalter.type"}} </span>
                <span> {{localize "abfalter.cut"}} </span>
                <span> {{localize "abfalter.imp"}} </span>
                <span> {{localize "abfalter.thr"}} </span>
                <span> {{localize "abfalter.heat"}} </span>
                <span> {{localize "abfalter.cold"}} </span>
                <span> {{localize "abfalter.ele"}} </span>
                <span> {{localize "abfalter.ene"}} </span>
                {{#if system.spiritHomebrew}}
                <span> {{localize "abfalter.spirit"}} </span>
                {{/if}}
            </div>

            <div>
                <span> {{localize "abfalter.base"}} </span>
                <input type="number" name="system.AT.cut" value="{{system.AT.cut}}" />
                <input type="number" name="system.AT.imp" value="{{system.AT.imp}}" />
                <input type="number" name="system.AT.thr" value="{{system.AT.thr}}" />
                <input type="number" name="system.AT.heat" value="{{system.AT.heat}}" />
                <input type="number" name="system.AT.cold" value="{{system.AT.cold}}" />
                <input type="number" name="system.AT.ele" value="{{system.AT.ele}}" />
                <input type="number" name="system.AT.ene" value="{{system.AT.ene}}" />
                {{#if system.spiritHomebrew}}
                <input type="number" name="system.AT.spt" value="{{system.AT.spt}}" />
                {{/if}}
            </div>

            <div>
                <span> {{localize "abfalter.final"}} </span>
                <span> {{system.derived.cut}} </span>
                <span> {{system.derived.imp}} </span>
                <span> {{system.derived.thr}} </span>
                <span> {{system.derived.heat}} </span>
                <span> {{system.derived.cold}} </span>
                <span> {{system.derived.ele}} </span>
                <span> {{system.derived.ene}} </span>
                {{#if system.spiritHomebrew}}
                <span> {{system.derived.spt}} </span>
                {{/if}}
            </div>
        </div>
    </div>

        {{!-- Effects Tab --}}
        <div class="tab effects flexcol" data-group="primary" data-tab="effects">
            {{> systems/abfalter/templates/actor/parts/active-effects.hbs }}
        </div>
    </section>

</form>
